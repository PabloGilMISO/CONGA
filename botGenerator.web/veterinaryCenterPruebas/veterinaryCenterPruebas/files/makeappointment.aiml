<?xml version="1.0" encoding="UTF-8"?>
<aiml>
  <category>
    <pattern>ActionPattern1 *</pattern>
    <template>SAVE <star/></template>
  </category>
  <category>
    <pattern>ActionPattern2 *</pattern>
    <template>SAVE <star/></template>
  </category>
  <category>
    <pattern>A</pattern>
    <template><srai>B</srai></template>
  </category>
  <category>
    <pattern>B</pattern>
    <template><srai>C</srai></template>
  </category>
  <category>
    <pattern>C</pattern>
    <template><srai>D</srai></template>
  </category>
  <category>
    <pattern>D</pattern>
    <template>E</template>
  </category>
  <category>
    <pattern>Patron 1</pattern>
    <template>Contestacion igual</template>
  </category>
  <category>
    <pattern>Patron 2</pattern>
    <template>Contestacion igual</template>
  </category>
  <category>
    <pattern>MAKEAPPOINTMENTHTTPREQUEST</pattern>
    <template>
      <callapi response_code_var="response_HttpRequest">
        <url>https://dimo1.ii.uam.es:8443/VeterinarioApi/dialogflow</url>
        <method>POST</method>
        <header><name></name></header>
        <query name="pet"><get name="pet"/></query>
        <query name="petName"><get name="petName"/></query>
        <query name="time"><get name="time"/></query>
        <query name="date"><get name="date"/></query>
      </callapi>
    </template>
  </category>
  <category>
    <pattern>I need an appointment for my * * at * on *</pattern>
    <template>
      <think>
        <srai>
          SAVEPET <star index="1"/>
        </srai>
        <srai>
          SAVEPETNAME <star index="2"/>
        </srai>
        <srai>
          SAVETIME <star index="3"/>
        </srai>
        <srai>
          SAVEDATE <star index="4"/>
        </srai>
        <set name="pandoralang">en</set>
      </think>
    </template>
  </category>
  <category>
    <pattern>MAKEAPPOINTMENT</pattern>
    <template>
      <condition name="pandoralang">
        <li value="en">
          <srai>MAKEAPPOINTMENTENMAKEAPPOINTMENTEASYRESP</srai>
          <srai>MAKEAPPOINTMENTHTTPREQUEST</srai>
          <srai>MAKEAPPOINTMENTHTTPRESPONSE</srai>
        </li>
      </condition>
    </template>
  </category>
  <category>
    <pattern>MAKEAPPOINTMENTENMAKEAPPOINTMENTEASYRESP</pattern>
    <template>Ok, appointment done </template>
  </category>
  <category>
    <pattern>I need an appointment for *</pattern>
    <template>
      <think>
        <srai>
          SAVEPETNAME <star index="1"/>
        </srai>
      </think>
      Okay, what day do you want an appointment?
    </template>
  </category>
  <category>
    <pattern>SAVEPETNAME *</pattern>
    <template>
      <think><set name="petName"><star/></set></think>
    </template>
  </category>
  <category>
    <pattern>SAVETOWPARAMS * *</pattern>
    <template>
      <think>
        <set name="param1"><star index="1"/></set>
        <set name="param2"><star index="2"/></set>
      </think>
    </template>
  </category>
  <category>
    <pattern>SAVEPET <set>pet</set></pattern>
    <template>
      <think><set name="pet"><map name="pet"><star/></map></set></think>
    </template>
  </category>
  <category>
    <pattern><set>pet</set></pattern>
    <template>
      <think><set name="pet"><map name="pet"><star/></map></set></think>
    </template>
  </category>
  <category>
    <pattern>Texto antes * slash * slash * texto despues</pattern>
    <template>
      <think>
        <set name="date_is_valid">
          <srai>VALIDDATE <star index="1"/>/<star index="2"/>/<star index="3"/></srai>
        </set>
      </think>
      <condition name="date_is_valid">
        <li value="TRUE">
          <think><set name="date"><star index="1"/>/<star index="2"/>/<star index="3"/></set></think>
        </li>
      </condition>
    </template>
  </category>
  <category>
    <pattern>* slash * slash *</pattern>
    <template>
    </template>
  </category>
  <category>
    <pattern>Fecha: * slash * slash *, hora: * colon *, Parametro *</pattern>
    <template>
    </template>
  </category>
  <category>
    <pattern>La hora es: * colon *</pattern>
    <template>
    </template>
  </category>
  <category>
    <pattern>* colon *</pattern>
    <template>
    </template>
  </category>
  <category>
    <pattern>* colon * y luego *</pattern>
    <template>
    </template>
  </category>
  <category>
    <pattern>Flow de nivel 1</pattern>
    <template>Template con solo texto</template>
  </category>
  <category>
    <pattern>Flow de nivel 1 con un parametro *</pattern>
    <template>SAVEPETNAME <star/></template>
  </category>
  <category>
    <pattern>Flow de nivel 1 con dos parametros * *</pattern>
    <template>SAVETOWPARAMS <star index="1"/> <star index="2"/></template>
  </category>
  <category>
    <pattern>SAVEPET *</pattern>
    <template>A</template>
  </category>
</aiml>